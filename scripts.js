const projectsEN = {
    quantTrading: [
        // 示例项目，如有实际项目请补充
        // {
        //     title: "Your Quant Project",
        //     desc: "Description of your quant trading project.",
        //     tags: ["Python", "Pandas"],
        //     link: "#"
        // }
    ],
    neuralNetwork: [
        {
            title: "European Option Pricing (PINN Framework)",
            desc: "Implemented a physics-informed neural network (PINN) framework for efficient European option pricing under the Black-Scholes model.",
            tags: ["Physics-Informed Neural Networks (PINNs)", "Black-Scholes PDE", "Adam Optimizer", "PDE Residuals", "Loss Curve Analysis", "Surface Plots"],
            link: "https://github.com/liangyitt/APINN-BasedFrameworkforE-cientEuropean-Option-Pricing-under-the-Black-Scholes-Model"
        },
        {
            title: "Approximation with ReLU Networks and FEM",
            desc: "Comparison of ReLU neural networks and classical Finite Element Methods (FEM) in approximating two-dimensional functions, evaluating computational accuracy and efficiency.",
            tags: ["ReLU Neural Networks", "Finite Element Methods (FEM)", "PyTorch", "SciPy Linear Interpolation", "Mean Squared Error (MSE)"],
            link: "https://github.com/liangyitt/Approximation-Properties-of-ReLU-Neural-Networks-and-Connections-with-Finite-Element-Methods"
        }
    ],
    machineLearning: [
        {
            title: "Stabilizing Mixed Traffic with AVs: Multi-Lane MFG and RL Approach",
            desc: "Explored how autonomous vehicles can stabilize mixed traffic flows using Mean Field Game theory and Reinforcement Learning across multi-lane scenarios including merges and congestion.",
            tags: ["Reinforcement Learning", "Mean Field Games", "PDE Modeling", "Traffic Flow Stabilization", "Multi-Agent Systems", "Markov Decision Processes"],
            link: "#"
        },
        {
            title: "League of Legends Match Prediction",
            desc: "Applied supervised machine learning models to predict outcomes of League of Legends matches, validating models using cross-validation and hyperparameter optimization.",
            tags: ["Logistic Regression", "Random Forest", "XGBoost", "Gaussian Naive Bayes", "GridSearchCV", "Cross-Validation"],
            link: "https://github.com/liangyitt/ds4400"
        },
        {
            title: "Cardiovascular Disease Prediction",
            desc: "Used machine learning models to identify significant health risk factors predicting cardiovascular diseases and strokes through extensive data preprocessing and validation.",
            tags: ["Random Forest Classifier (RFC)", "Random Forest Regression (RFR)", "Support Vector Machine (SVM)", "Hyperparameter Tuning", "K-fold Cross-Validation"],
            link: "https://github.com/liangyitt/Prediction-of-Cardiovascular-Disease-and-Stroke"
        }
    ],
    dataScience: [
        {
            title: "COVID-19 Vaccine Distribution Analysis",
            desc: "Analyzed Moderna COVID-19 vaccine distribution across U.S. states to visualize allocation patterns and identify distribution insights.",
            tags: ["CDC Dataset", "Matplotlib", "Python Data Analysis", "Data Visualization"],
            link: "https://github.com/liangyitt/Analysis-of-vaccination-status-in-the-United-States-12-months-after-the-start-of-covid19"
        },
        {
            title: "World Trade Analysis (2021)",
            desc: "Analyzed global trade impacts during major disruptions including COVID-19 and the Suez Canal blockage, emphasizing trade patterns through detailed visualizations.",
            tags: ["Pandas", "Plotly", "Seaborn", "Matplotlib", "NetworkX", "Sankey Diagrams"],
            link: "https://github.com/liangyitt/World-Trade-2021"
        }
    ]
};

const projectsZH = {
    quantTrading: [
        // 示例项目，如有实际项目请补充
    ],
    neuralNetwork: [
        {
            title: "欧式期权定价 (PINN框架)",
            desc: "基于物理信息神经网络 (PINN) 框架有效求解Black-Scholes偏微分方程实现欧式期权定价，确保预测结果与解析解一致。",
            tags: ["物理信息神经网络 (PINNs)", "Black-Scholes偏微分方程", "Adam优化器", "PDE残差", "损失曲线分析", "表面图"],
            link: "https://github.com/liangyitt/APINN-BasedFrameworkforE-cientEuropean-Option-Pricing-under-the-Black-Scholes-Model"
        },
        {
            title: "ReLU网络和有限元方法近似比较",
            desc: "比较ReLU神经网络与经典有限元方法(FEM)在二维函数近似中的性能，评估计算精度和效率。",
            tags: ["ReLU神经网络", "有限元方法(FEM)", "PyTorch", "SciPy线性插值", "均方误差(MSE)"],
            link: "https://github.com/liangyitt/Approximation-Properties-of-ReLU-Neural-Networks-and-Connections-with-Finite-Element-Methods"
        }
    ],
    machineLearning: [
        {
            title: "利用自动驾驶车辆稳定混合交通流：多车道平均场博弈与强化学习方法",
            desc: "研究自动驾驶车辆如何通过平均场博弈理论和强化学习方法稳定多车道混合交通流，包括合流和拥堵等场景。",
            tags: ["强化学习", "平均场博弈", "PDE建模", "交通流稳定", "多智能体系统", "马尔可夫决策过程"],
            link: "#"
        },
        {
            title: "英雄联盟比赛预测",
            desc: "应用监督式机器学习模型预测英雄联盟比赛结果，通过交叉验证和超参数优化验证模型性能。",
            tags: ["逻辑回归", "随机森林", "XGBoost", "高斯朴素贝叶斯", "网格搜索交叉验证", "交叉验证"],
            link: "https://github.com/liangyitt/ds4400"
        },
        {
            title: "心血管疾病预测",
            desc: "使用机器学习模型识别预测心血管疾病和中风的重要健康风险因素，通过广泛的数据预处理和验证提高准确性。",
            tags: ["随机森林分类器(RFC)", "随机森林回归(RFR)", "支持向量机(SVM)", "超参数调优", "K折交叉验证"],
            link: "https://github.com/liangyitt/Prediction-of-Cardiovascular-Disease-and-Stroke"
        }
    ],
    dataScience: [
        {
            title: "新冠疫苗分发分析",
            desc: "分析Moderna新冠疫苗在美国各州的分发情况，可视化分配模式并识别分发洞察。",
            tags: ["CDC数据集", "Matplotlib", "Python数据分析", "数据可视化"],
            link: "https://github.com/liangyitt/Analysis-of-vaccination-status-in-the-United-States-12-months-after-the-start-of-covid19"
        },
        {
            title: "2021年全球贸易分析",
            desc: "分析新冠疫情和苏伊士运河堵塞等重大中断事件对全球贸易的影响，通过详细可视化强调贸易模式变化。",
            tags: ["Pandas", "Plotly", "Seaborn", "Matplotlib", "NetworkX", "桑基图"],
            link: "https://github.com/liangyitt/World-Trade-2021"
        }
    ]
};

let currentLang = 'en';
let projects = projectsEN;

function createProjectCard(project) {
    // 对于交通项目特殊处理
    if (project.title.includes("Stabilizing Mixed Traffic") || project.title.includes("利用自动驾驶车辆稳定混合交通流")) {
        return `
            <div class="project-card">
                <h3>${project.title}</h3>
                <div class="desc">${project.desc}</div>
                <div class="tags">${formatTags(project.tags)}</div>
                <div class="project-links">
                    <a href="https://drive.google.com/file/d/1vCyjRdU2D3BTxu9T9-PdV4NJYnN8NiiR/view?usp=drive_link" target="_blank" class="project-link">
                        ${currentLang === 'en' ? 'Research Paper' : '研究论文'}
                    </a>
                </div>
            </div>
        `;
    }
    
    // 对于PINN项目特殊处理
    if (project.title.includes("European Option Pricing") || project.title.includes("欧式期权定价")) {
        return `
            <div class="project-card">
                <h3>${project.title}</h3>
                <div class="desc">${project.desc}</div>
                <div class="tags">${formatTags(project.tags)}</div>
                <div class="project-links">
                    <a href="${project.link}" target="_blank" class="project-link">
                        ${currentLang === 'en' ? 'GitHub' : 'GitHub'}
                    </a>
                    <a href="https://drive.google.com/file/d/1GDYidFYq5IIcn8-TEE8KL36FS64qaU_Z/view?usp=drive_link" target="_blank" class="project-link">
                        ${currentLang === 'en' ? 'Research Paper' : '研究论文'}
                    </a>
                </div>
            </div>
        `;
    }
    
    // 对于ReLU项目特殊处理
    if (project.title.includes("Approximation with ReLU") || project.title.includes("ReLU网络和有限元方法")) {
        return `
            <div class="project-card">
                <h3>${project.title}</h3>
                <div class="desc">${project.desc}</div>
                <div class="tags">${formatTags(project.tags)}</div>
                <div class="project-links">
                    <a href="${project.link}" target="_blank" class="project-link">
                        ${currentLang === 'en' ? 'GitHub' : 'GitHub'}
                    </a>
                    <a href="https://drive.google.com/file/d/12ATa-p3yYlDMWu_MvaZUSIpD7sgW2m6t/view?usp=drive_link" target="_blank" class="project-link">
                        ${currentLang === 'en' ? 'Research Paper' : '研究论文'}
                    </a>
                </div>
            </div>
        `;
    }
    
    // 其他所有项目通用处理，不再使用标题链接
    return `
        <div class="project-card">
            <h3>${project.title}</h3>
            <div class="desc">${project.desc}</div>
            <div class="tags">${formatTags(project.tags)}</div>
            <div class="project-links">
                <a href="${project.link}" target="_blank" class="project-link">
                    ${currentLang === 'en' ? 'GitHub' : 'GitHub'}
                </a>
            </div>
        </div>
    `;
}

function formatTags(tags) {
    return tags.map(tag => `<span class="tag">${tag}</span>`).join(' ');
}

function renderProjects() {
    const containers = {
        quantTrading: document.getElementById('quant-trading-projects'),
        neuralNetwork: document.getElementById('neural-network-projects'),
        machineLearning: document.getElementById('machine-learning-projects'),
        dataScience: document.getElementById('data-science-projects')
    };

    for (const [category, container] of Object.entries(containers)) {
        if (projects[category].length > 0) {
            container.innerHTML = projects[category].map(createProjectCard).join('');
        } else {
            container.innerHTML = `<div class="empty-projects">${currentLang === 'en' ? 'No projects yet.' : '暂无项目。'}</div>`;
        }
    }
}

// 导航栏锚点跳转和高亮
const navLinks = document.querySelectorAll('.nav-btn');
navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').replace('#', '');
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
            window.scrollTo({
                top: targetSection.offsetTop - 30,
                behavior: 'smooth'
            });
        }
        navLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
    });
});

// 语言切换功能
function switchLanguage(lang) {
    currentLang = lang;
    projects = lang === 'en' ? projectsEN : projectsZH;
    
    // 更新所有带有data-en和data-zh属性的元素
    document.querySelectorAll('[data-' + lang + ']').forEach(el => {
        el.textContent = el.getAttribute('data-' + lang);
    });
    
    // 更新项目内容
    renderProjects();
    
    // 更新语言按钮状态
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });
    
    // 更新HTML的lang属性
    document.documentElement.lang = lang;
    
    // 根据语言切换简历按钮显示
    if (lang === 'en') {
        document.querySelector('.en-cv-container').style.display = 'block';
        document.querySelector('.zh-cv-container').style.display = 'none';
    } else {
        document.querySelector('.en-cv-container').style.display = 'none';
        document.querySelector('.zh-cv-container').style.display = 'flex';
    }
}

// 页面滚动时高亮当前section对应的导航
window.addEventListener('scroll', () => {
    const sections = ['quant-trading', 'neural-network', 'machine-learning', 'data-science'];
    let current = '';
    const scrollY = window.scrollY + 100;
    for (const id of sections) {
        const section = document.getElementById(id);
        if (section && section.offsetTop <= scrollY) {
            current = id;
        }
    }
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
        }
    });
});

// 初始化
document.addEventListener('DOMContentLoaded', () => {
    renderProjects();
    
    // 添加语言按钮点击事件
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            switchLanguage(btn.getAttribute('data-lang'));
        });
    });
}); 